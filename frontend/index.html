<html>
    <head>

    </head>

    <body>
        Lote: <select name="" id="lote"></select>
        <p id = 'itens'></p>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    </body>
</html>

<script>
    $(document).ready(
        function(){
            $.ajax(
                {
                    url: 'http://localhost:5000/toddy/get',
                    type: 'GET',
                    beforeSend: function(){

                    },
                    success: function(result, status, xhr){
                        $.each(result, function(i, elemento){
                            console.log();
                            $('#lote').append(`<option value = "${elemento.lote}">${elemento.lote}</option>`);
                        });
                    },
                    error: function(){
                        alert('Deu ruim.');
                    },
                    complete: function(){
                        
                    }
                }
            );
        }
    );
    //TODO: Criar funcoes de lote no middleware
    
    /*
    $("#lote").change(
        function(){
            var lote = $('#lote').val();
            $.ajax({
                url: 'http://localhost:5000/toddy/buscarPorLote?lote=' + lote,
                type: 'GET',
                    beforeSend: function(){
                        $('#lote').attr('disabled', true);
                    },
                    success: function(result, status, xhr){
                        $.each(result, function(i, toddy){
                            $('#itens').append(`ID: ${toddy.id}, Validade: ${toddy.validade}, Conte√∫do: ${toddy.conteudo}<br><br>`)
                        });
                    },
                    error: function(){

                    },
                    complete: function(){
                        $('#lote').attr('disabled', false);
                    }
            }

            );
        }
    )*/

</script>